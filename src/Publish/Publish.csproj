<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <AssemblyName>ZeroInstall.Publish</AssemblyName>
    <RootNamespace>ZeroInstall.Publish</RootNamespace>
    <LangVersion>7.1</LangVersion>
    <GenerateDocumentationFile>True</GenerateDocumentationFile>
    <IncludeSource>True</IncludeSource>
    <NoWarn>$(NoWarn);1591;NU1701</NoWarn>
    <TreatWarningsAsErrors>True</TreatWarningsAsErrors>
    <SignAssembly>True</SignAssembly>
    <AssemblyOriginatorKeyFile>..\sgKey.snk</AssemblyOriginatorKeyFile>
    <RunCodeAnalysis>False</RunCodeAnalysis>
    <CodeAnalysisRuleSet>..\CodeAnalysis.ruleset</CodeAnalysisRuleSet>
    <OutputPath>..\..\build\$(Configuration)\</OutputPath>
  </PropertyGroup>

  <PropertyGroup Condition="'$(MSBuildRuntimeType)' == 'Full'">
    <TargetFrameworks>net40;net45;netstandard2.0</TargetFrameworks>
    <GeneratePackageOnBuild>True</GeneratePackageOnBuild>
  </PropertyGroup>
  <PropertyGroup Condition="'$(MSBuildRuntimeType)' == 'Core' and '$(OS)' == 'Windows_NT'">
    <TargetFrameworks>net45;netstandard2.0</TargetFrameworks>
  </PropertyGroup>
  <PropertyGroup Condition="'$(MSBuildRuntimeType)' == 'Core' and '$(OS)' != 'Windows_NT'">
    <TargetFrameworks>netstandard2.0</TargetFrameworks>
  </PropertyGroup>
  <PropertyGroup Condition="'$(MSBuildRuntimeType)' == 'Mono'">
    <TargetFrameworks>net45</TargetFrameworks>
  </PropertyGroup>

  <PropertyGroup>
    <Description>
The Zero Install Publishing API provides methods for creating and modifying feed files.
The Zero Install Publishing Tools (including the Feed Editor) are built upon this API. You can use the API to automate complex feed creation/update tasks.
API documentation: http://0install.de/api/backend/
    </Description>
    <PackageProjectUrl>http://0install.de/</PackageProjectUrl>
    <PackageLicenseUrl>http://www.gnu.org/copyleft/lesser.html</PackageLicenseUrl>
    <PackageIconUrl>https://0install.de/wp-content/uploads/icon.png</PackageIconUrl>
    <RepositoryUrl>https://github.com/0install/0install-dotnet</RepositoryUrl>
    <Product>Zero Install</Product>
    <Authors>Bastian Eicher</Authors>
    <Company>0install.de</Company>
    <Copyright>Copyright Bastian Eicher et al.</Copyright>
    <NeutralLanguage>en</NeutralLanguage>
  </PropertyGroup>

  <ItemGroup>
    <ProjectReference Include="..\Services\Services.csproj" />
  </ItemGroup>

  <ItemGroup Condition="'$(TargetFramework)' != 'netstandard2.0'">
    <!--<PackageReference Include="ELFSharp" Version="1.0.4" />-->
    <ProjectReference Include="..\DesktopIntegration\DesktopIntegration.csproj" />
  </ItemGroup>

  <ItemGroup Condition="'$(TargetFramework)' == 'netstandard2.0'">
    <!--<PackageReference Include="CoreCompat.ELFSharp" Version="1.0.5" />-->
    <Compile Remove="Capture\**" />
  </ItemGroup>

  <ItemGroup>
    <CodeAnalysisDictionary Include="..\CodeAnalysisDictionary.xml" />
  </ItemGroup>

  <ItemGroup>
    <EmbeddedResource Include="catalog.*" />
    <EmbeddedResource Include="feed.*" />
  </ItemGroup>

</Project>
