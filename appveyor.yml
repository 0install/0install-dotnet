image: Visual Studio 2017

before_build:
  - gitversion /l console /output buildserver

build_script:
  - ps: src\build.ps1 $env:GitVersion_NuGetVersion
  - ps: doc\build.ps1

test_script:
  - ps: src\test.ps1

artifacts:
  - path: build\Release\*.nupkg
    name: NuGet
  - path: build\Documentation
    name: Documentation

deploy:
  provider: Environment
  name: nuget.org
  on:
    appveyor_repo_tag: true
